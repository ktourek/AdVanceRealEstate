{% load static %}
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Welcome to AdVance Real Estate</title>

    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Italiana&family=Lato:wght@300;400;700&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
      integrity="sha512-9usAa10IRO0HhonpyAIVpjrylPvoDwiPUiKdWk5t3PyolY1cOd4DSE0Ga+ri4AuTroPR5aQvXU9xC6qOPnzFeg=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
    <link href="{% static 'css/site.css' %}" rel="stylesheet" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">


    {% block head %}{% endblock %}
    
    <style>
        .profile-dropdown {
            position: relative;
            display: inline-block;
        }
        
        .profile-button {
            background: none;
            border: none;
            cursor: pointer;
            font-size: 24px;
            color: white;
            padding: 5px 10px;
            transition: all 0.3s;
        }
        
        .profile-button:hover {
            opacity: 0.8;
        }
        
        .profile-menu {
            display: none;
            position: absolute;
            right: 0;
            top: 100%;
            background-color: #8f9e8b;
            min-width: 200px;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
            z-index: 1000;
            margin-top: 5px;
        }
        
        .profile-menu.show {
            display: block;
        }
        
        .profile-menu a {
            color: white;
            padding: 12px 16px;
            text-decoration: none;
            display: block;
            transition: background-color 0.3s;
        }
        
        .profile-menu a:hover {
            background-color: #7a8a76;
        }
        
        .profile-menu a i {
            margin-right: 8px;
            width: 16px;
            text-align: center;
        }
        
        .profile-menu a:first-child {
            border-top-left-radius: 8px;
            border-top-right-radius: 8px;
        }
        
        .profile-menu form a {
            border-bottom-left-radius: 8px;
            border-bottom-right-radius: 8px;
        }
    </style>
    
    <script>
        function toggleProfileMenu() {
            const menu = document.getElementById('profileMenu');
            menu.classList.toggle('show');
        }
        
        // Close dropdown when clicking outside
        window.onclick = function(event) {
            if (!event.target.matches('.profile-button') && !event.target.matches('.fa-user-circle')) {
                const menu = document.getElementById('profileMenu');
                if (menu && menu.classList.contains('show')) {
                    menu.classList.remove('show');
                }
            }
        }
    </script>

  </head>
  <body>
    <header>
      <div class="header-logo-row">
        <div class="logo-container">
          <div class="logo-icon">
            <img
              src="{% static 'images/logo.png' %}"
              alt="AdVance Real Estate Logo"
              class="site-logo"
            />
          </div>
        </div>
      </div>
      <div class="header-nav-row">
        <nav>
          <a href="{% url 'home' %}">Home</a>
          <a href="{% url 'about' %}">About</a>
          <a href="{% url 'listings' %}">Listings</a>
          <a href="{% url 'omaha' %}">Omaha</a>
        </nav>
        <div class="user-actions">
          {% if user.is_authenticated %}
          <div class="profile-dropdown">
            <button class="profile-button" onclick="toggleProfileMenu()">
              <i class="fas fa-user-circle"></i>
            </button>
            <div id="profileMenu" class="profile-menu">
              <a href="{% url 'generate_report' %}">
                <i class="fas fa-file-alt"></i> Generate Report
              </a>
              <form
                id="logout-form"
                action="{% url 'logout' %}"
                method="post"
                style="display: inline"
              >
                {% csrf_token %}
                <a
                  href="#"
                  onclick="event.preventDefault(); this.closest('form').submit();"
                >
                  <i class="fas fa-sign-out-alt"></i> Logout
                </a>
              </form>
            </div>
          </div>
          {% else %}
          <a
            href="{% url 'login' %}"
            class="login-link"
            style="color: white; text-decoration: none; font-weight: 500"
            >Login</a
          >
          {% endif %}
        </div>
      </div>
    </header>

    <main>{% block content %}{% endblock %}</main>

    <footer>
      <div class="footer-content">
        <div class="contact-item">
          <i class="fas fa-map-marker-alt"></i>
          <span>Omaha, NE</span>
        </div>
        <div class="separator">|</div>
        <div class="contact-item">
          <i class="fas fa-phone-alt"></i>
          <span>(402) 123-1234</span>
        </div>
        <div class="separator">|</div>
        <div class="contact-item">
          <i class="fas fa-envelope"></i>
          <span>info@advancehome.com</span>
        </div>
      </div>
    </footer>
  </body>
</html>

{% extends "base.html" %}

{% block content %}
<div class="container">
    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 30px; margin-top: 40px;">
        <h1 style="font-size: 32px; font-weight: 700; margin: 0;">Available Listings</h1>
        {% if user.is_authenticated %}
        <a href="{% url 'add_listing' %}" class="btn" style="background: #869A77; color: #fff; text-decoration: none;">
            <i class="fas fa-plus" style="margin-right: 8px;"></i>Add Listing
        </a>
        {% endif %}
    </div>

    {% if listings %}
    <div class="grid">
        {% for item in listings %}
        <article class="card">
            {% if item.photos.first %}
                <!-- Placeholder for photo if we had a view for it -->
                <div style="height: 200px; background: #eee; border-radius: 8px; margin-bottom: 15px; overflow: hidden;">
                    <!-- Using a static placeholder for now as we don't have the image view yet -->
                     <img src="https://placehold.co/400x300?text=Home" alt="{{ item.address }}" style="width: 100%; height: 100%; object-fit: cover;">
                </div>
            {% endif %}
            <h2>{{ item.address }}</h2>
            <p class="price">${{ item.price }}</p>
            <p class="muted">{{ item.neighborhood.name }}</p>
            <div style="display: flex; gap: 15px; margin: 10px 0; font-size: 14px; color: #666;">
                <span><i class="fas fa-bed"></i> {{ item.bedrooms|default:"-" }}</span>
                <span><i class="fas fa-bath"></i> {{ item.bathrooms|default:"-" }}</span>
                <span><i class="fas fa-ruler-combined"></i> {{ item.square_footage|default:"-" }} sqft</span>
            </div>
            <p>{{ item.description|truncatechars:100 }}</p>
            <p class="muted" style="margin-top: 15px; font-size: 12px;">Listed: {{ item.listed_date|date:"M d, Y" }}</p>
        </article>
        {% endfor %}
    </div>
    {% else %}
    <div style="text-align: center; padding: 60px; background: #f9fafb; border-radius: 8px;">
        <p style="font-size: 18px; color: #666;">No listings found.</p>
    </div>
    {% endif %}
</div>
{% endblock %}
